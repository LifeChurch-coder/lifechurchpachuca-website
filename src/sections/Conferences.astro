---
import TitleSection from "@/components/TitleSection.astro";
import Play from "@/assets/icons/Play.astro";

const pathBackground = "/images/series.jpg";
---

<section id="mensajes" class="flex flex-col pt-16 gap-10">
  <TitleSection title="Escucha nuestro último mensaje" />
  <div class="w-full aspect-video flex justify-end rounded-3xl overflow-hidden">
    <div
      id="playButton"
      class={`w-full min-h-[20px] bg-cover bg-center overflow-hidden cursor-pointer`}
      style={`background-image: url(${pathBackground})`}
    >
      <div
        id="play-content"
        class="w-full h-full hover:bg-[rgba(17,17,17,0.3)] ease-in-out duration-300 transition-all"
      >
        <div
          id="play-icon"
          class="w-full h-full flex justify-center items-center display-none play"
        >
          <Play size="30%" color="#d4d4d4" />
        </div>
      </div>
    </div>
    <div id="videoContainer" class="w-full h-full hidden">
      <iframe
        id="video"
        class="w-full aspect-video"
        src="https://www.youtube.com/embed/MWcFD7_3cxI?si=T8xe_yAJ7OlqZQxj"
        title="YouTube video player"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
      >
      </iframe>
    </div>
  </div>
</section>

<style>
  .play {
    transition:
      opacity 0.3s ease,
      visibility 0.3s ease;
  }
  .display-none {
    opacity: 0;
    visibility: hidden;
  }
  .show {
    opacity: 1;
    visibility: visible;
  }
</style>

<script>
  const playContent = document.getElementById("play-content");
  const playIcon = document.getElementById("play-icon");

  playContent?.addEventListener("mouseenter", () => {
    playIcon?.classList.remove("display-none");
    playIcon?.classList.add("show");
  });

  playContent?.addEventListener("mouseleave", () => {
    playIcon?.classList.remove("show");
    playIcon?.classList.add("display-none");
  });

  // VIDEO
  // Obtener elementos
  const playButton = document.getElementById("playButton");
  const videoContainer = document.getElementById("videoContainer");

  // Función para mostrar el video y reproducirlo
  playButton?.addEventListener("click", function () {
    videoContainer?.classList.remove("hidden");
    playButton?.classList.add("hidden"); // Mostrar el contenedor del video
    // video?.play(); // Reproducir el video
  });
</script>
